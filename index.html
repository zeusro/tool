<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">Êô∫ËÉΩÊñáÊú¨Â§ÑÁêÜÂ∑•ÂÖ∑</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="i18n.js"></script>
    <script src="go-struct-to-json.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'gradient': 'gradient 15s ease infinite',
                    },
                    keyframes: {
                        gradient: {
                            '0%, 100%': {
                                'background-size': '200% 200%',
                                'background-position': 'left center'
                            },
                            '50%': {
                                'background-size': '200% 200%',
                                'background-position': 'right center'
                            }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .dark-glass {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white">
    <div class="container mx-auto px-4 py-8">
        <!-- Language Switcher -->
        <div class="flex justify-end mb-4">
            <div class="flex gap-2">
                <button onclick="switchLanguage('zh-CN')" id="lang-zh-CN" class="px-3 py-1 rounded-lg bg-purple-600 bg-opacity-30 hover:bg-opacity-50 transition-all text-sm">‰∏≠Êñá</button>
                <button onclick="switchLanguage('zh-TW')" id="lang-zh-TW" class="px-3 py-1 rounded-lg bg-purple-600 bg-opacity-30 hover:bg-opacity-50 transition-all text-sm">ÁπÅÈ´î</button>
                <button onclick="switchLanguage('en-US')" id="lang-en-US" class="px-3 py-1 rounded-lg bg-purple-600 bg-opacity-30 hover:bg-opacity-50 transition-all text-sm">English</button>
            </div>
        </div>
        
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-5xl font-bold mb-4 bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent animate-gradient" data-i18n="title">
                Êô∫ËÉΩÊñáÊú¨Â§ÑÁêÜÂ∑•ÂÖ∑
            </h1>
            <p class="text-gray-300 text-lg" data-i18n="subtitle">Â§öÂäüËÉΩÊñáÊú¨Â§ÑÁêÜ‰∏éËß£ÊûêÂ∑•ÂÖ∑ÈõÜ</p>
        </header>


        <!-- Main Content Area -->
        <div class="max-w-6xl mx-auto">
            <!-- Input Section -->
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-gray-300" data-i18n="inputLabel">ËæìÂÖ•ÂÜÖÂÆπ</label>
                <textarea 
                    id="input" 
                    data-i18n="inputPlaceholder"
                    placeholder="Êô∫ËÉΩËØÜÂà´ÔºöËæìÂÖ• URL„ÄÅJSON„ÄÅUA„ÄÅGo Struct Êàñ Base64ÔºåÁ≥ªÁªü‰ºöËá™Âä®Ê£ÄÊµãÂπ∂Â§ÑÁêÜ..."
                    class="w-full h-40 px-4 py-3 rounded-lg dark-glass text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
                ></textarea>
            </div>

            <!-- Action Buttons -->
            <div class="mb-6 flex gap-4 justify-center">
                <button onclick="processInput()" id="btn-process" class="px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all duration-300 transform hover:scale-105 shadow-lg" data-i18n="process">
                    ‚ú® Â§ÑÁêÜ
                </button>
                <button onclick="clearAll()" id="btn-clear" class="px-8 py-3 bg-gradient-to-r from-gray-600 to-gray-700 rounded-lg font-semibold hover:from-gray-700 hover:to-gray-800 transition-all duration-300 transform hover:scale-105 shadow-lg" data-i18n="clear">
                    üóëÔ∏è Ê∏ÖÁ©∫
                </button>
                <button onclick="copyOutput()" id="btn-copy" class="px-8 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg font-semibold hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 transform hover:scale-105 shadow-lg" data-i18n="copy">
                    üìã Â§çÂà∂ÁªìÊûú
                </button>
            </div>

            <!-- Output Section -->
            <div>
                <label class="block text-sm font-medium mb-2 text-gray-300" data-i18n="outputLabel">ËæìÂá∫ÁªìÊûú</label>
                <div id="output" class="w-full min-h-40 px-4 py-3 rounded-lg dark-glass text-white whitespace-pre-wrap break-words">
                    <p class="text-gray-400 text-center" data-i18n="outputPlaceholder">Â§ÑÁêÜÁªìÊûúÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Auto-detect input type and process accordingly
        function detectInputType(input) {
            const trimmed = input.trim();
            
            // 1. Check for URL (starts with http:// or https://, or contains URL patterns)
            if (trimmed.match(/^(https?|ftp):\/\//i)) {
                try {
                    new URL(trimmed);
                    return 'url';
                } catch (e) {
                    // Not a valid URL, continue checking
                }
            } else if (trimmed.includes('://') && trimmed.includes('.')) {
                try {
                    new URL(trimmed);
                    return 'url';
                } catch (e) {
                    // Not a valid URL, continue checking
                }
            } else if (trimmed.includes('?') && trimmed.includes('=') && trimmed.includes('.')) {
                // Looks like a URL with query string but no protocol
                try {
                    new URL('https://' + trimmed);
                    return 'url';
                } catch (e) {
                    // Not a valid URL, continue checking
                }
            }
            
            // 2. Check for JSON (must start with { or [)
            if ((trimmed.startsWith('{') && trimmed.endsWith('}')) ||
                (trimmed.startsWith('[') && trimmed.endsWith(']'))) {
                try {
                    JSON.parse(trimmed);
                    // Check if it's compressed (no spaces/newlines)
                    const isCompressed = !/\s/.test(trimmed);
                    return isCompressed ? 'json-compress' : 'json-format';
                } catch (e) {
                    // Not valid JSON, continue checking
                }
            }
            
            // 3. Check for UA (contains common browser/OS keywords and is long enough)
            if (trimmed.length > 20) {
                const uaKeywords = ['Mozilla', 'Chrome', 'Safari', 'Firefox', 'Edge', 'Opera', 
                                  'Windows', 'Macintosh', 'Linux', 'Android', 'iPhone', 'iPad',
                                  'Gecko', 'WebKit', 'Trident', 'Mobile'];
                const uaScore = uaKeywords.filter(keyword => 
                    trimmed.includes(keyword) || trimmed.toLowerCase().includes(keyword.toLowerCase())
                ).length;
                if (uaScore >= 3) {
                    return 'ua';
                }
            }
            
            // 4. Check for Go Struct
            if (isGoStruct && isGoStruct(trimmed)) {
                return 'go-struct';
            }
            
            // 5. Check for Base64 (only contains base64 characters, no JSON/URL patterns)
            const base64Regex = /^[A-Za-z0-9+/=\s]+$/;
            if (base64Regex.test(trimmed) && trimmed.length > 10) {
                // Must not start with {, [, http, or contain ://
                if (!trimmed.startsWith('{') && !trimmed.startsWith('[') && 
                    !trimmed.match(/^https?/i) && !trimmed.includes('://')) {
                    const cleanBase64 = trimmed.replace(/\s/g, '');
                    // Check if it looks like base64 (has padding or length is multiple of 4)
                    if (cleanBase64.length % 4 === 0 || cleanBase64.endsWith('=')) {
                        return 'base64';
                    }
                }
            }
            
            // 6. Default: treat as text to encode to base64
            return 'base64';
        }

        // Language switcher
        function switchLanguage(lang) {
            if (window.i18n && window.i18n.setLanguage(lang)) {
                // Update active language button
                document.querySelectorAll('[id^="lang-"]').forEach(btn => {
                    btn.classList.remove('bg-opacity-50', 'ring-2', 'ring-purple-400');
                    btn.classList.add('bg-opacity-30');
                });
                const activeBtn = document.getElementById(`lang-${lang}`);
                if (activeBtn) {
                    activeBtn.classList.remove('bg-opacity-30');
                    activeBtn.classList.add('bg-opacity-50', 'ring-2', 'ring-purple-400');
                }
            }
        }

        // Update language button on language change
        function updateLanguageButtons(lang) {
            document.querySelectorAll('[id^="lang-"]').forEach(btn => {
                btn.classList.remove('bg-opacity-50', 'ring-2', 'ring-purple-400');
                btn.classList.add('bg-opacity-30');
            });
            const activeBtn = document.getElementById(`lang-${lang}`);
            if (activeBtn) {
                activeBtn.classList.remove('bg-opacity-30');
                activeBtn.classList.add('bg-opacity-50', 'ring-2', 'ring-purple-400');
            }
        }

        window.addEventListener('languageChanged', (e) => {
            updateLanguageButtons(e.detail.language);
        });

        // Initialize language button on page load
        document.addEventListener('DOMContentLoaded', () => {
            if (window.i18n) {
                updateLanguageButtons(window.i18n.getLanguage());
            }
        });

        // Process input with auto-detection
        function processInput() {
            const input = document.getElementById('input').value.trim();
            const outputDiv = document.getElementById('output');
            
            if (!input) {
                outputDiv.innerHTML = `<p class="text-red-400 text-center">${window.i18n ? window.i18n.t('errorEmpty') : 'ËØ∑ËæìÂÖ•ÂÜÖÂÆπÔºÅ'}</p>`;
                return;
            }

            // Auto-detect input type
            const detectedType = detectInputType(input);
            let result = '';
            let toolName = '';
            
            try {
                const t = window.i18n ? window.i18n.t : (key) => key;
                
                switch(detectedType) {
                    case 'url':
                        toolName = t('urlTool');
                        result = processURL(input);
                        break;
                    case 'json-compress':
                        toolName = t('jsonCompressTool');
                        result = processJSONCompress(input);
                        break;
                    case 'json-format':
                        toolName = t('jsonFormatTool');
                        result = processJSONFormat(input);
                        break;
                    case 'ua':
                        toolName = t('uaTool');
                        result = processUA(input);
                        break;
                    case 'go-struct':
                        toolName = t('goStructTool');
                        result = processGoStructToJSON(input);
                        break;
                    case 'base64':
                        toolName = t('base64Tool');
                        result = processBase64(input);
                        break;
                    default:
                        toolName = t('base64Tool');
                        result = processBase64(input);
                }
                
                // Add detected tool indicator
                const toolIndicator = `<div class="mb-3 text-sm text-gray-400 text-center">
                    <span class="px-3 py-1 bg-purple-500 bg-opacity-30 rounded-full">${toolName}</span>
                </div>`;
                
                outputDiv.innerHTML = toolIndicator + result;
            } catch (error) {
                const t = window.i18n ? window.i18n.t : (key) => key;
                outputDiv.innerHTML = `<p class="text-red-400">${t('errorPrefix')}${error.message}</p>`;
            }
        }

        // URL Parser
        function processURL(url) {
            try {
                const t = window.i18n ? window.i18n.t : (key) => key;
                
                // Decode URL
                let decoded = decodeURIComponent(url);
                // Add protocol if missing
                if (!decoded.match(/^[a-zA-Z][a-zA-Z\d+\-.]*:/)) {
                    decoded = 'https://' + decoded;
                }
                const urlObj = new URL(decoded);
                
                let html = '<div class="space-y-4">';
                
                // Basic URL info
                html += '<div class="bg-purple-500 bg-opacity-20 p-4 rounded-lg">';
                html += `<h3 class="text-lg font-semibold mb-2 text-purple-300">${t('urlBasicInfo')}</h3>`;
                html += `<p><span class="text-gray-400">${t('urlProtocol')}</span> <span class="text-cyan-400">${urlObj.protocol}</span></p>`;
                html += `<p><span class="text-gray-400">${t('urlHost')}</span> <span class="text-cyan-400">${urlObj.hostname}</span></p>`;
                html += `<p><span class="text-gray-400">${t('urlPort')}</span> <span class="text-cyan-400">${urlObj.port || t('urlDefaultPort')}</span></p>`;
                html += `<p><span class="text-gray-400">${t('urlPath')}</span> <span class="text-cyan-400">${urlObj.pathname}</span></p>`;
                html += `<p><span class="text-gray-400">${t('urlHash')}</span> <span class="text-cyan-400">${urlObj.hash || t('urlNoHash')}</span></p>`;
                html += '</div>';
                
                // Query parameters
                const params = urlObj.searchParams;
                if (params.toString()) {
                    html += '<div class="bg-blue-500 bg-opacity-20 p-4 rounded-lg">';
                    html += `<h3 class="text-lg font-semibold mb-3 text-blue-300">${t('urlQueryParams')}</h3>`;
                    html += '<div class="grid grid-cols-1 md:grid-cols-2 gap-3">';
                    
                    params.forEach((value, key) => {
                        html += '<div class="bg-black bg-opacity-30 p-3 rounded border border-gray-600">';
                        html += `<p class="text-yellow-400 font-mono text-sm mb-1">${key}</p>`;
                        html += `<p class="text-green-400 break-all">${decodeURIComponent(value)}</p>`;
                        html += '</div>';
                    });
                    
                    html += '</div>';
                    html += '</div>';
                } else {
                    html += '<div class="bg-gray-500 bg-opacity-20 p-4 rounded-lg">';
                    html += `<p class="text-gray-400">${t('urlNoQueryParams')}</p>`;
                    html += '</div>';
                }
                
                html += '</div>';
                return html;
            } catch (error) {
                const t = window.i18n ? window.i18n.t : (key) => key;
                return `<p class="text-red-400">${t('urlParseError')}${error.message}</p>`;
            }
        }

        // JSON Compress/Decompress
        function processJSONCompress(jsonStr) {
            try {
                const t = window.i18n ? window.i18n.t : (key) => key;
                
                // Try to parse as JSON first
                let jsonObj = JSON.parse(jsonStr);
                
                // Check if it's already compressed (no spaces)
                const isCompressed = !/\s/.test(jsonStr.trim());
                
                if (isCompressed) {
                    // Decompress (format)
                    return `<div class="bg-green-500 bg-opacity-20 p-4 rounded-lg">
                        <h3 class="text-lg font-semibold mb-2 text-green-300">${t('jsonDecompressed')}</h3>
                        <pre class="bg-black bg-opacity-40 p-4 rounded overflow-x-auto text-sm">${JSON.stringify(jsonObj, null, 2)}</pre>
                    </div>`;
                } else {
                    // Compress
                    const compressed = JSON.stringify(jsonObj);
                    return `<div class="bg-orange-500 bg-opacity-20 p-4 rounded-lg">
                        <h3 class="text-lg font-semibold mb-2 text-orange-300">${t('jsonCompressed')}</h3>
                        <pre class="bg-black bg-opacity-40 p-4 rounded overflow-x-auto text-sm break-all">${compressed}</pre>
                    </div>`;
                }
            } catch (error) {
                const t = window.i18n ? window.i18n.t : (key) => key;
                return `<p class="text-red-400">${t('jsonError')}${error.message}</p>`;
            }
        }

        // JSON Format
        function processJSONFormat(jsonStr) {
            try {
                const t = window.i18n ? window.i18n.t : (key) => key;
                const jsonObj = JSON.parse(jsonStr);
                const formatted = JSON.stringify(jsonObj, null, 2);
                
                return `<div class="bg-indigo-500 bg-opacity-20 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold mb-2 text-indigo-300">${t('jsonFormatted')}</h3>
                    <pre class="bg-black bg-opacity-40 p-4 rounded overflow-x-auto text-sm">${formatted}</pre>
                </div>`;
            } catch (error) {
                const t = window.i18n ? window.i18n.t : (key) => key;
                return `<p class="text-red-400">${t('jsonFormatError')}${error.message}</p>`;
            }
        }

        // UA Analyzer
        function processUA(ua) {
            const t = window.i18n ? window.i18n.t : (key) => key;
            const unknown = t('uaUnknown');
            
            const info = {
                browser: unknown,
                browserVersion: unknown,
                os: unknown,
                osVersion: unknown,
                device: unknown,
                engine: unknown,
                mobile: false,
                tablet: false,
                desktop: false
            };

            // Browser detection
            if (ua.includes('Chrome') && !ua.includes('Edg') && !ua.includes('OPR')) {
                const match = ua.match(/Chrome\/([\d.]+)/);
                info.browser = 'Chrome';
                info.browserVersion = match ? match[1] : unknown;
            } else if (ua.includes('Firefox')) {
                const match = ua.match(/Firefox\/([\d.]+)/);
                info.browser = 'Firefox';
                info.browserVersion = match ? match[1] : unknown;
            } else if (ua.includes('Safari') && !ua.includes('Chrome')) {
                const match = ua.match(/Version\/([\d.]+).*Safari/);
                info.browser = 'Safari';
                info.browserVersion = match ? match[1] : unknown;
            } else if (ua.includes('Edg')) {
                const match = ua.match(/Edg\/([\d.]+)/);
                info.browser = 'Edge';
                info.browserVersion = match ? match[1] : unknown;
            } else if (ua.includes('OPR')) {
                const match = ua.match(/OPR\/([\d.]+)/);
                info.browser = 'Opera';
                info.browserVersion = match ? match[1] : unknown;
            }

            // OS detection
            if (ua.includes('Windows')) {
                info.os = 'Windows';
                const match = ua.match(/Windows NT ([\d.]+)/);
                if (match) {
                    const version = match[1];
                    const versions = {
                        '10.0': '10/11',
                        '6.3': '8.1',
                        '6.2': '8',
                        '6.1': '7'
                    };
                    info.osVersion = versions[version] || version;
                }
                info.desktop = true;
            } else if (ua.includes('Mac OS X') || ua.includes('Macintosh')) {
                info.os = 'macOS';
                const match = ua.match(/Mac OS X ([\d_]+)/);
                if (match) {
                    info.osVersion = match[1].replace(/_/g, '.');
                }
                info.desktop = true;
            } else if (ua.includes('Linux')) {
                info.os = 'Linux';
                info.desktop = true;
            } else if (ua.includes('Android')) {
                info.os = 'Android';
                const match = ua.match(/Android ([\d.]+)/);
                info.osVersion = match ? match[1] : unknown;
                info.mobile = true;
            } else if (ua.includes('iPhone') || ua.includes('iPad')) {
                info.os = 'iOS';
                const match = ua.match(/OS ([\d_]+)/);
                if (match) {
                    info.osVersion = match[1].replace(/_/g, '.');
                }
                if (ua.includes('iPad')) {
                    info.tablet = true;
                } else {
                    info.mobile = true;
                }
            }

            // Engine detection
            if (ua.includes('Gecko')) {
                info.engine = 'Gecko';
            } else if (ua.includes('WebKit')) {
                info.engine = 'WebKit';
            } else if (ua.includes('Trident')) {
                info.engine = 'Trident';
            }

            // Device type
            if (ua.includes('Mobile')) {
                info.mobile = true;
            }

            let html = '<div class="space-y-4">';
            html += '<div class="bg-cyan-500 bg-opacity-20 p-4 rounded-lg">';
            html += `<h3 class="text-lg font-semibold mb-3 text-cyan-300">${t('uaClientInfo')}</h3>`;
            html += '<div class="grid grid-cols-1 md:grid-cols-2 gap-4">';
            
            html += `<div class="bg-black bg-opacity-30 p-3 rounded">
                <p class="text-gray-400 text-sm mb-1">${t('uaBrowser')}</p>
                <p class="text-cyan-400 font-semibold">${info.browser} ${info.browserVersion}</p>
            </div>`;
            
            html += `<div class="bg-black bg-opacity-30 p-3 rounded">
                <p class="text-gray-400 text-sm mb-1">${t('uaOS')}</p>
                <p class="text-green-400 font-semibold">${info.os} ${info.osVersion}</p>
            </div>`;
            
            html += `<div class="bg-black bg-opacity-30 p-3 rounded">
                <p class="text-gray-400 text-sm mb-1">${t('uaEngine')}</p>
                <p class="text-yellow-400 font-semibold">${info.engine}</p>
            </div>`;
            
            html += `<div class="bg-black bg-opacity-30 p-3 rounded">
                <p class="text-gray-400 text-sm mb-1">${t('uaDevice')}</p>
                <p class="text-purple-400 font-semibold">${info.mobile ? t('uaMobile') : info.tablet ? t('uaTablet') : t('uaDesktop')}</p>
            </div>`;
            
            html += '</div>';
            html += '</div>';
            
            html += '<div class="bg-gray-500 bg-opacity-20 p-4 rounded-lg mt-4">';
            html += `<h3 class="text-lg font-semibold mb-2 text-gray-300">${t('uaOriginal')}</h3>`;
            html += `<pre class="bg-black bg-opacity-40 p-3 rounded text-xs break-all">${ua}</pre>`;
            html += '</div>';
            
            html += '</div>';
            return html;
        }

        // Base64 Tools
        function processBase64(input) {
            const t = window.i18n ? window.i18n.t : (key) => key;
            let html = '<div class="space-y-4">';
            
            try {
                // Check if it's a valid base64 string
                const base64Regex = /^[A-Za-z0-9+/=]+$/;
                const isBase64 = base64Regex.test(input.trim()) && input.trim().length > 0;
                
                if (isBase64) {
                    // Try to decode
                    try {
                        const decoded = atob(input.trim());
                        
                        // Check if it's an image (common image headers)
                        const imageHeaders = {
                            '/9j/': 'JPEG',
                            'iVBORw0KGgo': 'PNG',
                            'R0lGODlh': 'GIF',
                            'UklGR': 'WebP',
                            'Qk0=': 'BMP'
                        };
                        
                        let isImage = false;
                        let imageType = '';
                        for (const [header, type] of Object.entries(imageHeaders)) {
                            if (input.trim().startsWith(header)) {
                                isImage = true;
                                imageType = type;
                                break;
                            }
                        }
                        
                        if (isImage) {
                            html += '<div class="bg-pink-500 bg-opacity-20 p-4 rounded-lg">';
                            html += `<h3 class="text-lg font-semibold mb-2 text-pink-300">${t('base64Image')}</h3>`;
                            html += `<p class="text-gray-300 mb-2">${t('base64ImageType')}${imageType}</p>`;
                            html += `<img src="data:image/${imageType.toLowerCase()};base64,${input.trim()}" class="max-w-full h-auto rounded-lg border border-gray-600" alt="Base64 Image">`;
                            html += '</div>';
                        } else {
                            html += '<div class="bg-green-500 bg-opacity-20 p-4 rounded-lg">';
                            html += `<h3 class="text-lg font-semibold mb-2 text-green-300">${t('base64Decoded')}</h3>`;
                            html += `<pre class="bg-black bg-opacity-40 p-4 rounded overflow-x-auto text-sm break-all">${decoded}</pre>`;
                            html += '</div>';
                        }
                    } catch (e) {
                        html += '<div class="bg-yellow-500 bg-opacity-20 p-4 rounded-lg">';
                        html += `<p class="text-yellow-300">${t('base64DecodeError')}</p>`;
                        html += '</div>';
                    }
                } else {
                    // Encode to base64
                    const encoded = btoa(input);
                    html += '<div class="bg-blue-500 bg-opacity-20 p-4 rounded-lg">';
                    html += `<h3 class="text-lg font-semibold mb-2 text-blue-300">${t('base64Encoded')}</h3>`;
                    html += `<pre class="bg-black bg-opacity-40 p-4 rounded overflow-x-auto text-sm break-all">${encoded}</pre>`;
                    html += '</div>';
                }
            } catch (error) {
                html += `<div class="bg-red-500 bg-opacity-20 p-4 rounded-lg">`;
                html += `<p class="text-red-300">${t('base64Error')}${error.message}</p>`;
                html += '</div>';
            }
            
            html += '</div>';
            return html;
        }

        // Clear all
        function clearAll() {
            const t = window.i18n ? window.i18n.t : (key) => key;
            document.getElementById('input').value = '';
            document.getElementById('output').innerHTML = `<p class="text-gray-400 text-center">${t('outputPlaceholder')}</p>`;
        }

        // Copy output
        function copyOutput() {
            const t = window.i18n ? window.i18n.t : (key) => key;
            const output = document.getElementById('output');
            const text = output.innerText || output.textContent;
            const placeholder = t('outputPlaceholder');
            
            if (text && !text.includes(placeholder)) {
                navigator.clipboard.writeText(text).then(() => {
                    const btn = event.target;
                    const originalText = btn.textContent;
                    btn.textContent = t('copied');
                    btn.classList.add('bg-green-600');
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.classList.remove('bg-green-600');
                    }, 2000);
                }).catch(err => {
                    alert(t('copyError') + err);
                });
            }
        }

    </script>
</body>
</html>